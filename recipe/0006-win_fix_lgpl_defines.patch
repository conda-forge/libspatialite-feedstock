From 4f15d1f04782d9f62f432a010c31634a086dd6b9 Mon Sep 17 00:00:00 2001
From: deltamarnix <deltamarnix@users.noreply.github.com>
Date: Wed, 1 Oct 2025 14:59:48 +0200
Subject: [PATCH] Disable GCP and RTTOPO in MSVC

---
 makefile.vc                              | 2 +-
 makefile64.vc                            | 2 +-
 makefile_mod.vc                          | 2 +-
 makefile_mod64.vc                        | 2 +-
 src/headers/spatialite/gaiaconfig-msvc.h | 4 ++--
 5 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/makefile.vc b/makefile.vc
index b83da88..b625c3a 100644
--- a/makefile.vc
+++ b/makefile.vc
@@ -116,7 +116,7 @@ spatialite_i.lib:     $(LIBOBJ)
 		$(LIBRARY_LIB)\proj.lib $(LIBRARY_LIB)\geos_c.lib \
 		$(LIBRARY_LIB)\freexl_i.lib $(LIBRARY_LIB)\iconv.lib \
 		$(LIBRARY_LIB)\sqlite3.lib $(LIBRARY_LIB)\zlib.lib \
-		$(LIBRARY_LIB)\libxml2.lib $(LIBRARY_LIB)\librttopo.lib \
+		$(LIBRARY_LIB)\libxml2.lib \
 		$(LIBRARY_LIB)\charset.lib
 	if exist $(SPATIALITE_DLL).manifest mt -manifest \
 		$(SPATIALITE_DLL).manifest -outputresource:$(SPATIALITE_DLL);2
diff --git a/makefile64.vc b/makefile64.vc
index b355f41..6359f20 100644
--- a/makefile64.vc
+++ b/makefile64.vc
@@ -116,7 +116,7 @@ spatialite_i.lib:     $(LIBOBJ)
 		$(LIBRARY_LIB)\proj.lib $(LIBRARY_LIB)\geos_c.lib \
 		$(LIBRARY_LIB)\freexl_i.lib $(LIBRARY_LIB)\iconv.lib \
 		$(LIBRARY_LIB)\sqlite3.lib $(LIBRARY_LIB)\zlib.lib \
-		$(LIBRARY_LIB)\libxml2.lib $(LIBRARY_LIB)\librttopo.lib \
+		$(LIBRARY_LIB)\libxml2.lib \
 		$(LIBRARY_LIB)\charset.lib
 	if exist $(SPATIALITE_DLL).manifest mt -manifest \
 		$(SPATIALITE_DLL).manifest -outputresource:$(SPATIALITE_DLL);2
diff --git a/makefile_mod.vc b/makefile_mod.vc
index 6ad215f..f08c9c9 100644
--- a/makefile_mod.vc
+++ b/makefile_mod.vc
@@ -116,7 +116,7 @@ mod_spatialite_i.lib:     $(LIBOBJ)
 		$(LIBRARY_LIB)\proj.lib $(LIBRARY_LIB)\geos_c.lib \
 		$(LIBRARY_LIB)\freexl_i.lib $(LIBRARY_LIB)\iconv.lib \
 		$(LIBRARY_LIB)\sqlite3.lib $(LIBRARY_LIB)\zlib.lib \
-		$(LIBRARY_LIB)\libxml2.lib $(LIBRARY_LIB)\librttopo.lib \
+		$(LIBRARY_LIB)\libxml2.lib \
 		$(LIBRARY_LIB)\charset.lib
 	if exist $(MOD_SPATIALITE_DLL).manifest mt -manifest \
 		$(MOD_SPATIALITE_DLL).manifest -outputresource:$(MOD_SPATIALITE_DLL);2
diff --git a/makefile_mod64.vc b/makefile_mod64.vc
index fcb5ffa..0c2709a 100644
--- a/makefile_mod64.vc
+++ b/makefile_mod64.vc
@@ -116,7 +116,7 @@ mod_spatialite_i.lib:     $(LIBOBJ)
 		$(LIBRARY_LIB)\proj.lib $(LIBRARY_LIB)\geos_c.lib \
 		$(LIBRARY_LIB)\freexl_i.lib $(LIBRARY_LIB)\iconv.lib \
 		$(LIBRARY_LIB)\sqlite3.lib $(LIBRARY_LIB)\zlib.lib \
-		$(LIBRARY_LIB)\libxml2.lib $(LIBRARY_LIB)\librttopo.lib \
+		$(LIBRARY_LIB)\libxml2.lib \
 		$(LIBRARY_LIB)\charset.lib
 	if exist $(MOD_SPATIALITE_DLL).manifest mt -manifest \
 		$(MOD_SPATIALITE_DLL).manifest -outputresource:$(MOD_SPATIALITE_DLL);2
diff --git a/src/headers/spatialite/gaiaconfig-msvc.h b/src/headers/spatialite/gaiaconfig-msvc.h
index 4b0b804..0b919f3 100644
--- a/src/headers/spatialite/gaiaconfig-msvc.h
+++ b/src/headers/spatialite/gaiaconfig-msvc.h
@@ -2,7 +2,7 @@
 /* ./src/headers/spatialite/gaiaconfig-msvc.h.in - manually maintained */
 
 /* Should be defined in order to enable GCP support. */
-#define ENABLE_GCP 1
+/* #undef ENABLE_GCP */
 
 /* Should be defined in order to enable GeoPackage support. */
 #define ENABLE_GEOPACKAGE 1
@@ -11,7 +11,7 @@
 #define ENABLE_LIBXML2 1
 
 /* Should be defined in order to enable RTTOPO support. */
-#define ENABLE_RTTOPO 1
+/* #undef ENABLE_RTTOPO */
 
 /* Should be defined in order to enable GEOS_370 support. */
 #define GEOS_370 1
-- 
2.50.1.windows.1

